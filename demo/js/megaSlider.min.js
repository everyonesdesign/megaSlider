/*megaSlider - v0.0.0 - 2013-12-13
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),z.addClass("megaSlider").css({position:"relative"}),v=y.options.startSlide,w=y.options.reverse?m(v):l(v),q(A),A.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(v).css({left:0}),u=A.parent(),i(),y.options.auto&&o(),y.options.stopAutoOnHover&&z.hover(p,o),y.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===y.options.effects?a.each(y.effects,function(a){e.push(a)}):e=y.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(a){if(!C){y.options.beforeSlide(w),C=!0;var b=d(),c=A.eq(w).data("effect");c&&(b=c),a&&(b=a),"function"==typeof y.effects[b]?y.effects[b]():console.error('The specified effect "'+b+'" is missing'),setTimeout(function(){C=!1,n(),y.options.afterSlide(w)},y.options.duration)}}function f(a){C||(w=m(v),e(a))}function g(a,b){C||(w=a,e(b))}function h(){var a="";"min"==y.options.slideHeight?a=j():"max"==y.options.slideHeight&&(a=k()),z.height(a)}function i(){y._width=z.width(),y._height=z.height()}function j(){var b=1/0;return A.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function k(){var b=0;return A.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function l(a){var b=a;return B>b+1?++b:b=0,b}function m(a){var b=a;return b>0?--b:b=B-1,b}function n(){y.options.reverse?(w=m(w),v=l(w)):(w=l(w),v=m(w))}function o(a){y.auto&&p(),y.auto="string"==typeof a?setInterval(function(){e(a)},y.options.pause):setInterval(function(){e()},y.options.pause)}function p(){clearInterval(y.auto),y.auto=null}function q(a){a.css({top:0,left:"-9999px","z-index":""})}function r(){y.options.responsive&&a(window).resize(function(){i(),h()})}function s(a){var b=A.eq(v),c=A.eq(w);"moveToRight"==a||"moveToLeft"==a?(b.animate({left:"moveToRight"==a?y._width:-y._width},{duration:y.options.duration,easing:y.options.easing}),c.css("left","moveToRight"==a?-y._width:y._width).animate({left:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(b)}})):"moveToBottom"==a?(b.animate({top:y._height},{duration:y.options.duration,easing:y.options.easing}),c.css({top:-y._height,left:0}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(b)}})):"moveToTop"==a&&(b.animate({top:-y._height},{duration:y.options.duration,easing:y.options.easing}),c.css({top:y._height,left:0}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(b)}})),setTimeout(function(){q(b)},y.options.duration)}function t(b){var c,d,e=A.eq(v),f=A.eq(w);"waveToRight"==b||"waveToLeft"==b?(c=y.options.horizontalBlocks,d=Math.ceil(y._width/c)):(c=y.options.verticalBlocks,d=Math.ceil(y._height/c));for(var g=0;c>g;g++){var h=e.clone().appendTo(u).wrap("<div></div>"),i=h.parent();"waveToRight"==b?(h.css({left:-d*g+"px",width:e.width(),"max-width":"none"}),i.css({top:0,left:g*d+"px",height:"100%",width:Math.ceil(y._width/c)+"px"})):"waveToLeft"==b?(h.css({right:-d*g+"px",left:"auto",width:e.width(),"max-width":"none"}),i.css({top:0,right:g*d+"px",height:"100%",width:Math.ceil(y._width/c)+"px"})):"waveToBottom"==b?(h.css({top:-d*g+"px",height:e.height()}),i.css({left:0,top:g*d+"px",width:"100%",height:Math.ceil(y._height/c)+"px"})):"waveToTop"==b&&(h.css({bottom:-d*g+"px",top:"auto",height:e.height()}),i.css({left:0,bottom:g*d+"px",width:"100%",height:Math.ceil(y._height/c)+"px"})),i.css({position:"absolute","z-index":2,overflow:"hidden"}).animate({opacity:0},{duration:y.options.duration*(g+1)/(c+1),complete:function(){a(this).remove()}})}f.css("left",0),q(e)}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var u,v,w,x={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:6,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},y=this,z=a(y),A=z.children().addClass("megaSlider-slide").css("overflow","hidden"),B=A.length,C=!1;return y.options=a.extend(x,b),y.goToNextSlide=function(a){return e(a),this},y.goToPrevSlide=function(a){return f(a),this},y.goToSlide=function(a,b){return g(a,b),this},y.getSlideNumber=function(){return v},y.startAuto=function(a){return o(a),this},y.stopAuto=function(){return p(),this},y.update=function(b){y.options=a.extend(y.options,b)},y.destroy=function(){z.removeClass("megaSlider")[0].removeAttribute("style"),p(),A.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),r(),y.effects={},y.effects.moveToRight=function(){s("moveToRight")},y.effects.moveToLeft=function(){s("moveToLeft")},y.effects.moveToBottom=function(){var a=A.eq(v),b=A.eq(w);a.animate({top:y._height},{duration:y.options.duration,easing:y.options.easing}),b.css({top:-y._height,left:0}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a)}})},y.effects.moveToTop=function(){var a=A.eq(v),b=A.eq(w);a.animate({top:-y._height},{duration:y.options.duration,easing:y.options.easing}),b.css({top:y._height,left:0}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a)}})},y.effects.moveOntoRight=function(){var a=A.eq(v),b=A.eq(w);b.css({left:-y._width,"z-index":1}).animate({left:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a),b.css("z-index","")}})},y.effects.moveOntoLeft=function(){var a=A.eq(v),b=A.eq(w);b.css({left:y._width,"z-index":1}).animate({left:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a),b.css("z-index","")}})},y.effects.moveOntoBottom=function(){var a=A.eq(v),b=A.eq(w);b.css({top:-y._height,left:0,"z-index":1}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a),b.css("z-index","")}})},y.effects.moveOntoTop=function(){var a=A.eq(v),b=A.eq(w);b.css({top:y._height,left:0,"z-index":1}).animate({top:0},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a),b.css("z-index","")}})},y.effects.fade=function(){var a=A.eq(v),b=A.eq(w);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:y.options.duration,easing:y.options.easing,complete:function(){q(a),b.css("z-index","")}})},y.effects.waveToRight=function(){t("waveToRight")},y.effects.waveToLeft=function(){t("waveToLeft")},y.effects.waveToBottom=function(){t("waveToBottom")},y.effects.waveToTop=function(){t("waveToTop")},this}}(jQuery);