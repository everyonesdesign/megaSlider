/*megaSlider - v0.0.0 - 2013-12-14
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),B.addClass("megaSlider").css({position:"relative"}),x=A.options.startSlide,y=A.options.reverse?m(x):l(x),q(C),C.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(x).css({left:0}),w=C.parent(),i(),A.options.auto&&o(),A.options.stopAutoOnHover&&B.hover(p,o),A.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===A.options.effects?a.each(A.effects,function(a){e.push(a)}):e=A.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(a){if(!E){A.options.beforeSlide(y),E=!0;var b=d(),c=C.eq(y).data("effect");c&&(b=c),a&&(b=a),"function"==typeof A.effects[b]?A.effects[b]():console.error('The specified effect "'+b+'" is missing'),setTimeout(function(){E=!1,n(),A.options.afterSlide(y)},A.options.duration)}}function f(a){E||(y=m(x),e(a))}function g(a,b){E||(y=a,e(b))}function h(){var a="";"min"==A.options.slideHeight?a=j():"max"==A.options.slideHeight&&(a=k()),B.height(a)}function i(){A._width=B.width(),A._height=B.height()}function j(){var b=1/0;return C.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function k(){var b=0;return C.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function l(a){var b=a;return D>b+1?++b:b=0,b}function m(a){var b=a;return b>0?--b:b=D-1,b}function n(){A.options.reverse?(y=m(y),x=l(y)):(y=l(y),x=m(y))}function o(a){A.auto&&p(),A.auto="string"==typeof a?setInterval(function(){e(a)},A.options.pause):setInterval(function(){e()},A.options.pause)}function p(){clearInterval(A.auto),A.auto=null}function q(a){a.css({top:0,left:"-9999px","z-index":""})}function r(){A.options.responsive&&a(window).resize(function(){i(),h()})}function s(a){var b=C.eq(x),c=C.eq(y);"moveToRight"==a||"moveToLeft"==a?(b.animate({left:"moveToRight"==a?A._width:-A._width},{duration:A.options.duration,easing:A.options.easing}),c.css("left","moveToRight"==a?-A._width:A._width).animate({left:0},{duration:A.options.duration,easing:A.options.easing,complete:function(){q(b)}})):("moveToBottom"==a||"moveToTop"==a)&&(b.animate({top:"moveToBottom"==a?A._height:-A._height},{duration:A.options.duration,easing:A.options.easing}),c.css({top:"moveToBottom"==a?-A._height:A._height,left:0}).animate({top:0},{duration:A.options.duration,easing:A.options.easing,complete:function(){q(b)}})),setTimeout(function(){q(b)},A.options.duration)}function t(a){var b=C.eq(x),c=C.eq(y);"moveOntoRight"==a||"moveOntoLeft"==a?c.css({left:"moveOntoRight"==a?-A._width:A._width,"z-index":1}).animate({left:0},{duration:A.options.duration,easing:A.options.easing,complete:function(){q(b),c.css("z-index","")}}):("moveOntoBottom"==a||"moveOntoTop"==a)&&c.css({top:"moveOntoBottom"==a?-A._height:A._height,left:0,"z-index":1}).animate({top:0},{duration:A.options.duration,easing:A.options.easing,complete:function(){q(b),c.css("z-index","")}})}function u(b){var c,d,e=C.eq(x),f=C.eq(y);"waveToRight"==b||"waveToLeft"==b?(c=A.options.horizontalBlocks,d=Math.ceil(A._width/c)):(c=A.options.verticalBlocks,d=Math.ceil(A._height/c));for(var g=0;c>g;g++){var h=e.clone().appendTo(w).wrap("<div></div>"),i=h.parent();"waveToRight"==b?(h.css({left:-d*g+"px",width:e.width(),"max-width":"none"}),i.css({top:0,left:g*d+"px",height:"100%",width:Math.ceil(A._width/c)+"px"})):"waveToLeft"==b?(h.css({right:-d*g+"px",left:"auto",width:e.width(),"max-width":"none"}),i.css({top:0,right:g*d+"px",height:"100%",width:Math.ceil(A._width/c)+"px"})):"waveToBottom"==b?(h.css({top:-d*g+"px",height:e.height()}),i.css({left:0,top:g*d+"px",width:"100%",height:Math.ceil(A._height/c)+"px"})):"waveToTop"==b&&(h.css({bottom:-d*g+"px",top:"auto",height:e.height()}),i.css({left:0,bottom:g*d+"px",width:"100%",height:Math.ceil(A._height/c)+"px"})),i.css({position:"absolute","z-index":2,overflow:"hidden"}).animate({opacity:0},{duration:A.options.duration*(g+1)/(c+1),complete:function(){a(this).remove()}})}f.css("left",0),q(e)}function v(b){for(var c=C.eq(x),d=C.eq(y),e=0;e<A.options.horizontalBlocks;e++)for(var f=0;f<A.options.verticalBlocks;f++){var g=c.clone().appendTo(w).wrap("<div></div>"),h=g.parent();g.css({left:"waveBottomRight"==b||"waveTopRight"==b?-Math.ceil(A._width/A.options.horizontalBlocks)*e+"px":"auto",right:"waveBottomRight"==b||"waveTopRight"==b?"auto":-Math.ceil(A._width/A.options.horizontalBlocks)*e+"px",top:"waveBottomRight"==b||"waveBottomLeft"==b?-Math.ceil(A._height/A.options.verticalBlocks)*f+"px":"auto",bottom:"waveBottomRight"==b||"waveBottomLeft"==b?"auto":-Math.ceil(A._height/A.options.verticalBlocks)*f+"px",width:c.width(),height:c.height(),"max-width":"none"}),h.css({left:"waveBottomRight"==b||"waveTopRight"==b?Math.ceil(A._width/A.options.horizontalBlocks)*e+"px":"auto",right:"waveBottomRight"==b||"waveTopRight"==b?"auto":Math.ceil(A._width/A.options.horizontalBlocks)*e+"px",top:"waveBottomRight"==b||"waveBottomLeft"==b?Math.ceil(A._height/A.options.verticalBlocks)*f+"px":"auto",bottom:"waveBottomRight"==b||"waveBottomLeft"==b?"auto":Math.ceil(A._height/A.options.verticalBlocks)*f+"px",width:Math.ceil(A._width/A.options.horizontalBlocks)+"px",height:Math.ceil(A._height/A.options.verticalBlocks)+"px",position:"absolute","z-index":2,overflow:"hidden"}),function(b,c,d){setTimeout(function(){b.animate({opacity:0},{duration:(c+d)/(A.options.horizontalBlocks+A.options.verticalBlocks)*A.options.duration,easing:"linear",complete:function(){a(this).remove()}})},(c+d)/2/(A.options.horizontalBlocks+A.options.verticalBlocks)*A.options.duration)}(h,e,f)}d.css("left",0),q(c)}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var w,x,y,z={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:6,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},A=this,B=a(A),C=B.children().addClass("megaSlider-slide").css("overflow","hidden"),D=C.length,E=!1;return A.options=a.extend(z,b),A.goToNextSlide=function(a){return e(a),this},A.goToPrevSlide=function(a){return f(a),this},A.goToSlide=function(a,b){return g(a,b),this},A.getSlideNumber=function(){return x},A.startAuto=function(a){return o(a),this},A.stopAuto=function(){return p(),this},A.update=function(b){A.options=a.extend(A.options,b)},A.destroy=function(){B.removeClass("megaSlider")[0].removeAttribute("style"),p(),C.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),r(),A.effects={},A.effects.moveRight=function(){s("moveToRight")},A.effects.moveLeft=function(){s("moveToLeft")},A.effects.moveBottom=function(){s("moveToBottom")},A.effects.moveTop=function(){s("moveToTop")},A.effects.moveOntoRight=function(){t("moveOntoRight")},A.effects.moveOntoLeft=function(){t("moveOntoLeft")},A.effects.moveOntoBottom=function(){t("moveOntoBottom")},A.effects.moveOntoTop=function(){t("moveOntoTop")},A.effects.fade=function(){var a=C.eq(x),b=C.eq(y);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:A.options.duration,easing:A.options.easing,complete:function(){q(a),b.css("z-index","")}})},A.effects.waveRight=function(){u("waveToRight")},A.effects.waveLeft=function(){u("waveToLeft")},A.effects.waveBottom=function(){u("waveToBottom")},A.effects.waveTop=function(){u("waveToTop")},A.effects.waveBottomRight=function(){v("waveBottomRight")},A.effects.waveBottomLeft=function(){v("waveBottomLeft")},A.effects.waveTopRight=function(){v("waveTopRight")},A.effects.waveTopLeft=function(){v("waveTopLeft")},this}}(jQuery);