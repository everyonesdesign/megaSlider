/*megaSlider - v0.0.0 - 2013-12-16
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),D.addClass("megaSlider").css({position:"relative"}),z=C.options.startSlide,A=C.options.reverse?m(z):l(z),q(E),E.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(z).css({left:0}),y=E.parent(),i(),C.options.auto&&o(),C.options.stopAutoOnHover&&D.hover(p,o),C.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===C.options.effects?a.each(C.effects,function(a){e.push(a)}):e=C.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(a){if(!G){C.options.beforeSlide(A),G=!0;var b=d(),c=E.eq(A).data("effect");c&&(b=c),a&&(b=a),"function"==typeof C.effects[b]?C.effects[b]():console.error('The specified effect "'+b+'" is missing'),setTimeout(function(){G=!1,n(),C.options.afterSlide(A)},C.options.duration)}}function f(a){G||(A=m(z),e(a))}function g(a,b){G||(A=a,e(b))}function h(){var a="";"min"==C.options.slideHeight?a=j():"max"==C.options.slideHeight&&(a=k()),D.height(a)}function i(){C._width=D.width(),C._height=D.height()}function j(){var b=1/0;return E.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function k(){var b=0;return E.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function l(a){var b=a;return F>b+1?++b:b=0,b}function m(a){var b=a;return b>0?--b:b=F-1,b}function n(){C.options.reverse?(A=m(A),z=l(A)):(A=l(A),z=m(A))}function o(a){C.auto&&p(),C.auto="string"==typeof a?setInterval(function(){e(a)},C.options.pause):setInterval(function(){e()},C.options.pause)}function p(){clearInterval(C.auto),C.auto=null}function q(a){a.css({top:0,left:"-9999px","z-index":""})}function r(){C.options.responsive&&a(window).resize(function(){i(),h()})}function s(a){var b=E.eq(z),c=E.eq(A);"moveRight"==a||"moveLeft"==a?(b.animate({left:"moveRight"==a?C._width:-C._width},{duration:C.options.duration,easing:C.options.easing}),c.css("left","moveRight"==a?-C._width:C._width).animate({left:0},{duration:C.options.duration,easing:C.options.easing,complete:function(){q(b)}})):("moveBottom"==a||"moveTop"==a)&&(b.animate({top:"moveBottom"==a?C._height:-C._height},{duration:C.options.duration,easing:C.options.easing}),c.css({top:"moveBottom"==a?-C._height:C._height,left:0}).animate({top:0},{duration:C.options.duration,easing:C.options.easing,complete:function(){q(b)}})),setTimeout(function(){q(b)},C.options.duration)}function t(a){var b=E.eq(z),c=E.eq(A);"moveOntoRight"==a||"moveOntoLeft"==a?c.css({left:"moveOntoRight"==a?-C._width:C._width,"z-index":1}).animate({left:0},{duration:C.options.duration,easing:C.options.easing,complete:function(){q(b),c.css("z-index","")}}):("moveOntoBottom"==a||"moveOntoTop"==a)&&c.css({top:"moveOntoBottom"==a?-C._height:C._height,left:0,"z-index":1}).animate({top:0},{duration:C.options.duration,easing:C.options.easing,complete:function(){q(b),c.css("z-index","")}})}function u(b){var c,d,e=E.eq(z),f=E.eq(A);"waveRight"==b||"waveLeft"==b?(c=C.options.horizontalBlocks,d=Math.ceil(C._width/c)):(c=C.options.verticalBlocks,d=Math.ceil(C._height/c));for(var g=0;c>g;g++){var h=e.clone().appendTo(y).wrap("<div></div>"),i=h.parent();h.css({left:"waveRight"==b?-d*g+"px":"auto",right:"waveLeft"==b?-d*g+"px":"auto",top:"waveBottom"==b?-d*g+"px":"auto",bottom:"waveTop"==b?-d*g+"px":"auto",width:"waveRight"==b||"waveLeft"==b?e.width():"",height:"waveBottom"==b||"waveTop"==b?e.height():"","max-width":"none","max-height":"none"}),i.css({position:"absolute","z-index":2,overflow:"hidden",left:"waveRight"==b?g*d+"px":"waveLeft"==b?"":0,right:"waveLeft"==b?g*d+"px":"auto",top:"waveBottom"==b?g*d+"px":"waveTop"==b?"":"auto",bottom:"waveTop"==b?g*d+"px":"auto",width:"waveRight"==b||"waveLeft"==b?Math.ceil(C._width/c)+"px":"100%",height:"waveBottom"==b||"waveTop"==b?Math.ceil(C._height/c)+"px":"100%"}).animate({opacity:0},{duration:C.options.duration*(g+1)/(c+1),complete:function(){a(this).remove()}})}f.css("left",0),q(e)}function v(b){for(var c=E.eq(z),d=E.eq(A),e=0;e<C.options.horizontalBlocks;e++)for(var f=0;f<C.options.verticalBlocks;f++){var g=c.clone().appendTo(y).wrap("<div></div>"),h=g.parent();g.css({left:"waveBottomRight"==b||"waveTopRight"==b?-Math.ceil(C._width/C.options.horizontalBlocks)*e+"px":"auto",right:"waveBottomRight"==b||"waveTopRight"==b?"auto":-Math.ceil(C._width/C.options.horizontalBlocks)*e+"px",top:"waveBottomRight"==b||"waveBottomLeft"==b?-Math.ceil(C._height/C.options.verticalBlocks)*f+"px":"auto",bottom:"waveBottomRight"==b||"waveBottomLeft"==b?"auto":-Math.ceil(C._height/C.options.verticalBlocks)*f+"px",width:c.width(),height:c.height(),"max-width":"none"}),h.css({left:"waveBottomRight"==b||"waveTopRight"==b?Math.ceil(C._width/C.options.horizontalBlocks)*e+"px":"auto",right:"waveBottomRight"==b||"waveTopRight"==b?"auto":Math.ceil(C._width/C.options.horizontalBlocks)*e+"px",top:"waveBottomRight"==b||"waveBottomLeft"==b?Math.ceil(C._height/C.options.verticalBlocks)*f+"px":"auto",bottom:"waveBottomRight"==b||"waveBottomLeft"==b?"auto":Math.ceil(C._height/C.options.verticalBlocks)*f+"px",width:Math.ceil(C._width/C.options.horizontalBlocks)+"px",height:Math.ceil(C._height/C.options.verticalBlocks)+"px",position:"absolute","z-index":2,overflow:"hidden"}),function(b,c,d){setTimeout(function(){b.animate({opacity:0},{duration:(c+d)/(C.options.horizontalBlocks+C.options.verticalBlocks)*C.options.duration,easing:"linear",complete:function(){a(this).remove()}})},(c+d)/2/(C.options.horizontalBlocks+C.options.verticalBlocks)*C.options.duration)}(h,e,f)}d.css("left",0),q(c)}function w(b){var c,d,e=E.eq(z),f=E.eq(A);"foldRight"==b||"foldLeft"==b?(c=C.options.horizontalBlocks,d=Math.ceil(C._width/c)):(c=C.options.verticalBlocks,d=Math.ceil(C._height/c));for(var g=0;c>g;g++){var h=e.clone().appendTo(y).wrap("<div></div>"),i=h.parent();h.css({left:"foldRight"==b?-d*g+"px":"auto",right:"foldLeft"==b?-d*g+"px":"auto",top:"foldBottom"==b?-d*g+"px":"auto",bottom:"foldTop"==b?-d*g+"px":"auto",width:"foldRight"==b||"foldLeft"==b?e.width():"",height:"foldBottom"==b||"foldTop"==b?e.height():"","max-width":"none","max-height":"none"}),i.css({position:"absolute","z-index":2,overflow:"hidden",left:"foldRight"==b?g*d+"px":"foldLeft"==b?"":0,right:"foldLeft"==b?g*d+"px":"auto",top:"foldBottom"==b?g*d+"px":"foldTop"==b?"":"auto",bottom:"foldTop"==b?g*d+"px":"auto",width:"foldRight"==b||"foldLeft"==b?Math.ceil(C._width/c)+"px":"100%",height:"foldBottom"==b||"foldTop"==b?Math.ceil(C._height/c)+"px":"100%"}).animate({width:"foldRight"==b||"foldLeft"==b?0:"100%",height:"foldTop"==b||"foldBottom"==b?0:"100%"},{duration:C.options.duration,complete:function(){a(this).remove()}})}f.css("left",0),q(e)}function x(b,c){var d,e,f=E.eq(z),g=E.eq(A);"sliceRight"==b||"sliceLeft"==b?(d=C.options.horizontalBlocks,e=Math.ceil(C._width/d)):(d=C.options.verticalBlocks,e=Math.ceil(C._height/d));for(var h=0;d>h;h++){var i=f.clone().appendTo(y).wrap("<div></div>"),j=i.parent();i.css({left:"sliceRight"==b?-e*h+"px":"auto",right:"sliceLeft"==b?-e*h+"px":"auto",top:"sliceBottom"==b?-e*h+"px":"auto",bottom:"sliceTop"==b?-e*h+"px":"auto",width:"sliceRight"==b||"sliceLeft"==b?f.width():"",height:"sliceBottom"==b||"sliceTop"==b?f.height():"","max-width":"none","max-height":"none"}),j.css({position:"absolute","z-index":2,overflow:"hidden",left:"sliceRight"==b?h*e+"px":"sliceLeft"==b?"":0,right:"sliceLeft"==b?h*e+"px":"auto",top:"sliceBottom"==b?h*e+"px":"sliceTop"==b?"":"auto",bottom:"sliceTop"==b?h*e+"px":"auto",width:"sliceRight"==b||"sliceLeft"==b?Math.ceil(C._width/d)+"px":"100%",height:"sliceBottom"==b||"sliceTop"==b?Math.ceil(C._height/d)+"px":"100%"}),function(b,c,d,e){var f=1==c%2&&e?-1:1,g="sliceRight"==d||"sliceLeft"==d?C.options.horizontalBlocks:C.options.verticalBlocks;setTimeout(function(){b.animate({left:"sliceTop"==d||"sliceBottom"==d?-C._width*f:b.css("left"),top:"sliceLeft"==d||"sliceRight"==d?-C._height*f:b.css("top")},{duration:1/g*C.options.duration,easing:"linear",complete:function(){a(this).remove()}})},c/1.1/g*C.options.duration)}(j,h,b,c)}g.css("left",0),q(f)}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var y,z,A,B={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:6,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},C=this,D=a(C),E=D.children().addClass("megaSlider-slide").css("overflow","hidden"),F=E.length,G=!1;return C.options=a.extend(B,b),C.goToNextSlide=function(a){return e(a),this},C.goToPrevSlide=function(a){return f(a),this},C.goToSlide=function(a,b){return g(a,b),this},C.getSlideNumber=function(){return z},C.startAuto=function(a){return o(a),this},C.stopAuto=function(){return p(),this},C.update=function(b){C.options=a.extend(C.options,b)},C.destroy=function(){D.removeClass("megaSlider")[0].removeAttribute("style"),p(),E.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),r(),C.effects={},C.effects.moveRight=function(){s("moveRight")},C.effects.moveLeft=function(){s("moveLeft")},C.effects.moveBottom=function(){s("moveBottom")},C.effects.moveTop=function(){s("moveTop")},C.effects.moveOntoRight=function(){t("moveOntoRight")},C.effects.moveOntoLeft=function(){t("moveOntoLeft")},C.effects.moveOntoBottom=function(){t("moveOntoBottom")},C.effects.moveOntoTop=function(){t("moveOntoTop")},C.effects.fade=function(){var a=E.eq(z),b=E.eq(A);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:C.options.duration,easing:C.options.easing,complete:function(){q(a),b.css("z-index","")}})},C.effects.waveRight=function(){u("waveRight")},C.effects.waveLeft=function(){u("waveLeft")},C.effects.waveBottom=function(){u("waveBottom")},C.effects.waveTop=function(){u("waveTop")},C.effects.waveBottomRight=function(){v("waveBottomRight")},C.effects.waveBottomLeft=function(){v("waveBottomLeft")},C.effects.waveTopRight=function(){v("waveTopRight")},C.effects.waveTopLeft=function(){v("waveTopLeft")},C.effects.foldRight=function(){w("foldRight")},C.effects.foldLeft=function(){w("foldLeft")},C.effects.foldBottom=function(){w("foldBottom")},C.effects.foldTop=function(){w("foldTop")},C.effects.sliceRight=function(){x("sliceRight")},C.effects.sliceLeft=function(){x("sliceLeft")},C.effects.sliceBottom=function(){x("sliceBottom")},C.effects.sliceTop=function(){x("sliceTop")},C.effects.crossSliceRight=function(){x("sliceRight",!0)},C.effects.crossSliceLeft=function(){x("sliceLeft",!0)},C.effects.crossSliceBottom=function(){x("sliceBottom",!0)},C.effects.crossSliceTop=function(){x("sliceTop",!0)},this}}(jQuery);