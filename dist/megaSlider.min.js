/*megaSlider - v0.0.0 - 2013-12-12
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),x.addClass("megaSlider").css({position:"relative"}),t=w.options.startSlide,u=w.options.reverse?m(t):l(t),q(y),y.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(t).css({left:0}),s=y.parent(),i(),w.options.auto&&o(),w.options.stopAutoOnHover&&x.hover(p,o),w.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===w.options.effects?a.each(w.effects,function(a){e.push(a)}):e=w.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(){if(!A){w.options.beforeSlide(u),A=!0;var a=d();"function"==typeof w.effects[a]?w.effects[a]():console.error('The specified effect "'+a+'" is missing'),w.options.afterSlide(u)}}function f(){A||(u=m(t),e())}function g(a){A||(u=a,e())}function h(){var a="";"min"==w.options.slideHeight?a=j():"max"==w.options.slideHeight&&(a=k()),x.height(a)}function i(){w._width=x.width(),w._height=x.height()}function j(){var b=1/0;return y.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function k(){var b=0;return y.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function l(a){var b=a;return z>b+1?++b:b=0,b}function m(a){var b=a;return b>0?--b:b=z-1,b}function n(){w.options.reverse?(u=m(u),t=l(u)):(u=l(u),t=m(u))}function o(){w.auto||(w.auto=setInterval(e,w.options.pause))}function p(){clearInterval(w.auto),w.auto=null}function q(a){a.css({top:0,left:"-9999px","z-index":""})}function r(){w.options.responsive&&a(window).resize(function(){i(),h()})}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var s,t,u,v={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:4,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},w=this,x=a(w),y=x.children().addClass("megaSlider-slide").css("overflow","hidden"),z=y.length,A=!1;return w.options=a.extend(v,b),w.goToNextSlide=function(){return e(),this},w.goToPrevSlide=function(){return f(),this},w.goToSlide=function(a){return g(a),this},w.getSlideNumber=function(){return t},w.startAuto=function(){return o(),this},w.stopAuto=function(){return p(),this},w.update=function(b){w.options=a.extend(w.options,b)},w.destroy=function(){x.removeClass("megaSlider")[0].removeAttribute("style"),p(),y.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),r(),w.effects={},w.effects.moveToRight=function(){var a=y.eq(t),b=y.eq(u);a.animate({left:w._width},{duration:w.options.duration,easing:w.options.easing}),b.css("left",-w._width).animate({left:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),n(),A=!1}})},w.effects.moveToLeft=function(){var a=y.eq(t),b=y.eq(u);a.animate({left:-w._width},{duration:w.options.duration,easing:w.options.easing}),b.css("left",w._width).animate({left:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),n(),A=!1}})},w.effects.moveToBottom=function(){var a=y.eq(t),b=y.eq(u);a.animate({top:w._height},{duration:w.options.duration,easing:w.options.easing}),b.css({top:-w._height,left:0}).animate({top:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),n(),A=!1}})},w.effects.moveToTop=function(){var a=y.eq(t),b=y.eq(u);a.animate({top:-w._height},{duration:w.options.duration,easing:w.options.easing}),b.css({top:w._height,left:0}).animate({top:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),n(),A=!1}})},w.effects.moveOntoRight=function(){var a=y.eq(t),b=y.eq(u);b.css({left:-w._width,"z-index":1}).animate({left:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),b.css("z-index",""),n(),A=!1}})},w.effects.moveOntoLeft=function(){var a=y.eq(t),b=y.eq(u);b.css({left:w._width,"z-index":1}).animate({left:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),b.css("z-index",""),n(),A=!1}})},w.effects.moveOntoBottom=function(){var a=y.eq(t),b=y.eq(u);b.css({top:-w._height,left:0,"z-index":1}).animate({top:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),b.css("z-index",""),n(),A=!1}})},w.effects.moveOntoTop=function(){var a=y.eq(t),b=y.eq(u);b.css({top:w._height,left:0,"z-index":1}).animate({top:0},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),b.css("z-index",""),n(),A=!1}})},w.effects.fade=function(){var a=y.eq(t),b=y.eq(u);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:w.options.duration,easing:w.options.easing,complete:function(){q(a),b.css("z-index",""),n(),A=!1}})},w.effects.waveToRight=function(){for(var b=y.eq(t),c=y.eq(u),d=0;d<w.options.horizontalBlocks;d++){var e=b.clone().appendTo(s).wrap("<div></div>").css({left:-Math.ceil(w._width/w.options.horizontalBlocks)*d+"px",width:b.width(),"max-width":"none"}),f=e.parent();f.css({position:"absolute","z-index":2,overflow:"hidden",height:"100%",width:Math.ceil(w._width/w.options.horizontalBlocks)+"px",top:0,left:d*Math.ceil(w._width/w.options.horizontalBlocks)+"px"}).animate({opacity:0},{duration:w.options.duration*(d+1)/(w.options.horizontalBlocks+1),complete:function(){a(this).remove()}})}c.css("left",0),q(b),setTimeout(function(){A=!1,n()},w.options.duration)},this}}(jQuery);