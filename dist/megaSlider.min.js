/*megaSlider - v0.0.0 - 2013-12-12
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),y.addClass("megaSlider").css({position:"relative"}),u=x.options.startSlide,v=x.options.reverse?m(u):l(u),q(z),z.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(u).css({left:0}),t=z.parent(),i(),x.options.auto&&o(),x.options.stopAutoOnHover&&y.hover(p,o),x.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===x.options.effects?a.each(x.effects,function(a){e.push(a)}):e=x.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(){if(!B){x.options.beforeSlide(v),B=!0;var a=d();"function"==typeof x.effects[a]?x.effects[a]():console.error('The specified effect "'+a+'" is missing'),x.options.afterSlide(v)}}function f(){B||(v=m(u),e())}function g(a){B||(v=a,e())}function h(){var a="";"min"==x.options.slideHeight?a=j():"max"==x.options.slideHeight&&(a=k()),y.height(a)}function i(){x._width=y.width(),x._height=y.height()}function j(){var b=1/0;return z.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function k(){var b=0;return z.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function l(a){var b=a;return A>b+1?++b:b=0,b}function m(a){var b=a;return b>0?--b:b=A-1,b}function n(){x.options.reverse?(v=m(v),u=l(v)):(v=l(v),u=m(v))}function o(){x.auto||(x.auto=setInterval(e,x.options.pause))}function p(){clearInterval(x.auto),x.auto=null}function q(a){a.css({top:0,left:"-9999px","z-index":""})}function r(){x.options.responsive&&a(window).resize(function(){i(),h()})}function s(b){for(var c=z.eq(u),d=z.eq(v),e=0;e<x.options.horizontalBlocks;e++){var f=c.clone().appendTo(t).wrap("<div></div>").css({width:c.width(),"max-width":"none"}),g=f.parent();"waveToRight"==b?(f.css({left:-Math.ceil(x._width/x.options.horizontalBlocks)*e+"px"}),g.css("left",e*Math.ceil(x._width/x.options.horizontalBlocks)+"px")):"waveToLeft"==b&&(f.css({right:-Math.ceil(x._width/x.options.horizontalBlocks)*e+"px",left:"auto"}),g.css("right",e*Math.ceil(x._width/x.options.horizontalBlocks)+"px")),g.css({position:"absolute","z-index":2,overflow:"hidden",height:"100%",width:Math.ceil(x._width/x.options.horizontalBlocks)+"px",top:0}).animate({opacity:0},{duration:x.options.duration*(e+1)/(x.options.horizontalBlocks+1),complete:function(){a(this).remove()}})}d.css("left",0),q(c),setTimeout(function(){B=!1,n()},x.options.duration)}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var t,u,v,w={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:4,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},x=this,y=a(x),z=y.children().addClass("megaSlider-slide").css("overflow","hidden"),A=z.length,B=!1;return x.options=a.extend(w,b),x.goToNextSlide=function(){return e(),this},x.goToPrevSlide=function(){return f(),this},x.goToSlide=function(a){return g(a),this},x.getSlideNumber=function(){return u},x.startAuto=function(){return o(),this},x.stopAuto=function(){return p(),this},x.update=function(b){x.options=a.extend(x.options,b)},x.destroy=function(){y.removeClass("megaSlider")[0].removeAttribute("style"),p(),z.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),r(),x.effects={},x.effects.moveToRight=function(){var a=z.eq(u),b=z.eq(v);a.animate({left:x._width},{duration:x.options.duration,easing:x.options.easing}),b.css("left",-x._width).animate({left:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),n(),B=!1}})},x.effects.moveToLeft=function(){var a=z.eq(u),b=z.eq(v);a.animate({left:-x._width},{duration:x.options.duration,easing:x.options.easing}),b.css("left",x._width).animate({left:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),n(),B=!1}})},x.effects.moveToBottom=function(){var a=z.eq(u),b=z.eq(v);a.animate({top:x._height},{duration:x.options.duration,easing:x.options.easing}),b.css({top:-x._height,left:0}).animate({top:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),n(),B=!1}})},x.effects.moveToTop=function(){var a=z.eq(u),b=z.eq(v);a.animate({top:-x._height},{duration:x.options.duration,easing:x.options.easing}),b.css({top:x._height,left:0}).animate({top:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),n(),B=!1}})},x.effects.moveOntoRight=function(){var a=z.eq(u),b=z.eq(v);b.css({left:-x._width,"z-index":1}).animate({left:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),b.css("z-index",""),n(),B=!1}})},x.effects.moveOntoLeft=function(){var a=z.eq(u),b=z.eq(v);b.css({left:x._width,"z-index":1}).animate({left:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),b.css("z-index",""),n(),B=!1}})},x.effects.moveOntoBottom=function(){var a=z.eq(u),b=z.eq(v);b.css({top:-x._height,left:0,"z-index":1}).animate({top:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),b.css("z-index",""),n(),B=!1}})},x.effects.moveOntoTop=function(){var a=z.eq(u),b=z.eq(v);b.css({top:x._height,left:0,"z-index":1}).animate({top:0},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),b.css("z-index",""),n(),B=!1}})},x.effects.fade=function(){var a=z.eq(u),b=z.eq(v);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:x.options.duration,easing:x.options.easing,complete:function(){q(a),b.css("z-index",""),n(),B=!1}})},x.effects.waveToRight=function(){s("waveToRight")},x.effects.waveToLeft=function(){s("waveToLeft")},this}}(jQuery);