/*megaSlider - v0.0.0 - 2013-12-13
* https://github.com/everyonesdesign/megaSlider.git
* Copyright (c) 2013 Trambitskiy Yura;
* Licensed MIT 
*/

!function(a){a.fn.megaSlider=function(b){function c(){h(),C.addClass("megaSlider").css({position:"relative"}),y=B.options.startSlide,z=B.options.reverse?o(y):n(y),s(D),D.wrapAll("<div class='megaSlider-slides'>").css({position:"absolute"}).eq(y).css({left:0}),x=D.parent(),k(),B.options.auto&&q(),B.options.stopAutoOnHover&&C.hover(r,q),B.options.onSliderLoad()}function d(){var b,c,d,e=[];return"all"===B.options.effects?a.each(B.effects,function(a){e.push(a)}):e=B.options.effects.split(","),c=e.length-1,d=Math.floor(Math.random()*(c+1)),b=e[d]}function e(a){if(!F){B.options.beforeSlide(z),F=!0;var b=d(),c=D.eq(z).data("effect");c&&(b=c),a&&(b=a),"function"==typeof B.effects[b]?B.effects[b]():console.error('The specified effect "'+b+'" is missing'),setTimeout(function(){F=!1,p(),B.options.afterSlide(z)},B.options.duration)}}function f(a){F||(z=o(y),e(a))}function g(a,b){F||(z=a,e(b))}function h(){var a="";"min"==B.options.slideHeight?a=l():"max"==B.options.slideHeight&&(a=m()),C.height(a)}function k(){B._width=C.width(),B._height=C.height()}function l(){var b=1/0;return D.each(function(){var c=a(this).height();b>c&&(b=c)}),b}function m(){var b=0;return D.each(function(){var c=a(this).height();c>b&&(b=c)}),b}function n(a){var b=a;return E>b+1?++b:b=0,b}function o(a){var b=a;return b>0?--b:b=E-1,b}function p(){B.options.reverse?(z=o(z),y=n(z)):(z=n(z),y=o(z))}function q(a){B.auto&&r(),B.auto="string"==typeof a?setInterval(function(){e(a)},B.options.pause):setInterval(function(){e()},B.options.pause)}function r(){clearInterval(B.auto),B.auto=null}function s(a){a.css({top:0,left:"-9999px","z-index":""})}function t(){B.options.responsive&&a(window).resize(function(){k(),h()})}function u(a){var b=D.eq(y),c=D.eq(z);"moveToRight"==a||"moveToLeft"==a?(b.animate({left:"moveToRight"==a?B._width:-B._width},{duration:B.options.duration,easing:B.options.easing}),c.css("left","moveToRight"==a?-B._width:B._width).animate({left:0},{duration:B.options.duration,easing:B.options.easing,complete:function(){s(b)}})):("moveToBottom"==a||"moveToTop"==a)&&(b.animate({top:"moveToBottom"==a?B._height:-B._height},{duration:B.options.duration,easing:B.options.easing}),c.css({top:"moveToBottom"==a?-B._height:B._height,left:0}).animate({top:0},{duration:B.options.duration,easing:B.options.easing,complete:function(){s(b)}})),setTimeout(function(){s(b)},B.options.duration)}function v(a){var b=D.eq(y),c=D.eq(z);"moveOntoRight"==a||"moveOntoLeft"==a?c.css({left:"moveOntoRight"==a?-B._width:B._width,"z-index":1}).animate({left:0},{duration:B.options.duration,easing:B.options.easing,complete:function(){s(b),c.css("z-index","")}}):("moveOntoBottom"==a||"moveOntoTop"==a)&&c.css({top:"moveOntoBottom"==a?-B._height:B._height,left:0,"z-index":1}).animate({top:0},{duration:B.options.duration,easing:B.options.easing,complete:function(){s(b),c.css("z-index","")}})}function w(b){var c,d,e=D.eq(y),f=D.eq(z);"waveToRight"==b||"waveToLeft"==b?(c=B.options.horizontalBlocks,d=Math.ceil(B._width/c)):(c=B.options.verticalBlocks,d=Math.ceil(B._height/c));for(var g=0;c>g;g++){var h=e.clone().appendTo(x).wrap("<div></div>"),i=h.parent();"waveToRight"==b?(h.css({left:-d*g+"px",width:e.width(),"max-width":"none"}),i.css({top:0,left:g*d+"px",height:"100%",width:Math.ceil(B._width/c)+"px"})):"waveToLeft"==b?(h.css({right:-d*g+"px",left:"auto",width:e.width(),"max-width":"none"}),i.css({top:0,right:g*d+"px",height:"100%",width:Math.ceil(B._width/c)+"px"})):"waveToBottom"==b?(h.css({top:-d*g+"px",height:e.height()}),i.css({left:0,top:g*d+"px",width:"100%",height:Math.ceil(B._height/c)+"px"})):"waveToTop"==b&&(h.css({bottom:-d*g+"px",top:"auto",height:e.height()}),i.css({left:0,bottom:g*d+"px",width:"100%",height:Math.ceil(B._height/c)+"px"})),i.css({position:"absolute","z-index":2,overflow:"hidden"}).animate({opacity:0},{duration:B.options.duration*(g+1)/(c+1),complete:function(){a(this).remove()}})}f.css("left",0),s(e)}if(0==this.length)return this;if(this.length>1)return this.each(function(){a(this).megaSlider(b)}),this;var x,y,z,A={effects:"all",auto:!1,pause:5e3,duration:500,horizontalBlocks:8,verticalBlocks:6,stopAutoOnHover:!0,slideHeight:"max",easing:"swing",startSlide:0,reverse:!1,responsive:!0,beforeSlide:function(){},afterSlide:function(){},onSliderLoad:function(){}},B=this,C=a(B),D=C.children().addClass("megaSlider-slide").css("overflow","hidden"),E=D.length,F=!1;return B.options=a.extend(A,b),B.goToNextSlide=function(a){return e(a),this},B.goToPrevSlide=function(a){return f(a),this},B.goToSlide=function(a,b){return g(a,b),this},B.getSlideNumber=function(){return y},B.startAuto=function(a){return q(a),this},B.stopAuto=function(){return r(),this},B.update=function(b){B.options=a.extend(B.options,b)},B.destroy=function(){C.removeClass("megaSlider")[0].removeAttribute("style"),r(),D.removeClass("megaSlider-slide").unwrap().each(function(){a(this)[0].removeAttribute("style")})},c(),t(),B.effects={},B.effects.moveToRight=function(){u("moveToRight")},B.effects.moveToLeft=function(){u("moveToLeft")},B.effects.moveToBottom=function(){u("moveToBottom")},B.effects.moveToTop=function(){u("moveToTop")},B.effects.moveOntoRight=function(){v("moveOntoRight")},B.effects.moveOntoLeft=function(){v("moveOntoLeft")},B.effects.moveOntoBottom=function(){v("moveOntoBottom")},B.effects.moveOntoTop=function(){v("moveOntoTop")},B.effects.fade=function(){var a=D.eq(y),b=D.eq(z);b.css({left:0,"z-index":1}).animate({opacity:0},0).animate({opacity:1},{duration:B.options.duration,easing:B.options.easing,complete:function(){s(a),b.css("z-index","")}})},B.effects.waveToRight=function(){w("waveToRight")},B.effects.waveToLeft=function(){w("waveToLeft")},B.effects.waveToBottom=function(){w("waveToBottom")},B.effects.waveToTop=function(){w("waveToTop")},B.effects.waveDiagonal=function(){var b=D.eq(y),c=D.eq(z);for(i=0;i<B.options.horizontalBlocks;i++)for(j=0;j<B.options.verticalBlocks;j++){var d=b.clone().appendTo(x).wrap("<div></div>"),e=d.parent();d.css({left:-Math.ceil(B._width/B.options.horizontalBlocks)*i+"px",top:-Math.ceil(B._height/B.options.verticalBlocks)*j+"px",width:b.width(),height:b.height(),"max-width":"none"}),e.css({left:Math.ceil(B._width/B.options.horizontalBlocks)*i+"px",top:Math.ceil(B._height/B.options.verticalBlocks)*j+"px",width:Math.ceil(B._width/B.options.horizontalBlocks)+"px",height:Math.ceil(B._height/B.options.verticalBlocks)+"px",position:"absolute","z-index":2,overflow:"hidden"}),function(b,c,d){setTimeout(function(){b.animate({opacity:0},{duration:B.options.duration*(1-c*d/(B.options.horizontalBlocks*B.options.verticalBlocks)),easing:"linear",complete:function(){a(this).remove()}})},c*d/(B.options.horizontalBlocks*B.options.verticalBlocks)*B.options.duration)}(e,i,j)}c.css("left",0),s(b)},this}}(jQuery);